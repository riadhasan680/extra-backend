import{L as S}from"./chunk-I3VB6NM2-DQ4El-Pb.js";import{P as u}from"./chunk-P3UUX2T6-C0H2Kh9I.js";import{S as h,a as v}from"./chunk-U726TGCM-DM_KrzvQ.js";import{b as f,dM as _,a as T,j as s,C as j,u as P,h as C,r as w,ai as g,P as E,T as N,k as K,H as q,fl as D,aa as M,s as R,q as x,dK as b,t as k}from"./index-D2YvuHvs.js";import{a as H}from"./chunk-B6ZOPCPA-n94ZUZ5f.js";import{T as m}from"./chunk-GIZFNLKK-CslZsp8I.js";import{D as I}from"./chunk-KCWP7RF5-BrPRdj_F.js";import{u as O}from"./chunk-C76H5USB-Dz6rxCdl.js";import"./chunk-KIIT4BNH-DzPEFzBZ.js";import"./Trans-CpX4fwIJ.js";var z="name,*sales_channels,*address,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",c=M(),F=()=>{const{t:e}=f(),l=P(),d=C(),r=async i=>{if(await d({title:e("general.areYouSure"),description:e("stockLocations.delete.confirmation",{name:i.name}),confirmText:e("actions.remove"),cancelText:e("actions.cancel")}))try{await R.admin.stockLocation.delete(i.id),x.invalidateQueries({queryKey:b.lists()}),x.invalidateQueries({queryKey:b.detail(i.id)}),k.success(e("stockLocations.delete.successToast",{name:i.name}))}catch(a){k.error(a.message)}};return w.useMemo(()=>[c.accessor("name",{header:e("fields.name"),cell:({getValue:i})=>{const t=i();return t?s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:t}):s.jsx(u,{})}}),c.accessor("address",{header:e("fields.address"),cell:({getValue:i,row:t})=>{const a=i(),o=t.original;return a?s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:H({address:o.address}).join(", ")})}):s.jsx(u,{})}}),c.accessor("fulfillment_sets",{id:"shipping_fulfillment",header:e("stockLocations.fulfillmentSets.shipping.header"),cell:({getValue:i})=>{const t=i(),o=!!(t==null?void 0:t.find(n=>n.type==="shipping"));return s.jsx(g,{color:o?"green":"grey",children:e(o?"statuses.enabled":"statuses.disabled")})}}),c.accessor("fulfillment_sets",{id:"pickup_fulfillment",header:e("stockLocations.fulfillmentSets.pickup.header"),cell:({getValue:i})=>{const t=i(),o=!!(t==null?void 0:t.find(n=>n.type==="pickup"));return s.jsx(g,{color:o?"green":"grey",children:e(o?"statuses.enabled":"statuses.disabled")})}}),c.accessor("sales_channels",{header:e("stockLocations.salesChannels.label"),cell:({getValue:i})=>{const t=i();return t!=null&&t.length?s.jsx("div",{className:"flex items-center",children:s.jsx(S,{inline:!0,n:1,list:t.map(a=>a.name)})}):s.jsx(u,{})}}),c.action({actions:i=>{const t=i.row.original;return[[{icon:s.jsx(E,{}),label:e("actions.edit"),onClick:()=>{l(`/settings/locations/${t.id}/edit`)}}],[{icon:s.jsx(N,{}),label:e("actions.delete"),onClick:()=>r(t)}]]}})],[])},Q=({pageSize:e=20,prefix:l})=>{const d=O(["order","offset","q"],l),{offset:r,...i}=d;return{limit:e,offset:r?Number(r):0,...i}},L=20,y="loc";function ee(){const{t:e}=f(),l=Q({pageSize:L,prefix:y}),{stock_locations:d=[],count:r,isError:i,error:t,isLoading:a}=_({fields:z,...l},{placeholderData:K}),o=F(),{getWidgets:n}=T();if(i)throw t;return s.jsxs(m,{widgets:{after:n("location.list.after"),before:n("location.list.before"),sideAfter:n("location.list.side.after"),sideBefore:n("location.list.side.before")},showJSON:!0,children:[s.jsx(m.Main,{children:s.jsx(j,{className:"flex flex-col divide-y p-0",children:s.jsx(I,{data:d,columns:o,rowCount:r,pageSize:L,getRowId:p=>p.id,heading:e("stockLocations.domain"),subHeading:e("stockLocations.list.description"),emptyState:{empty:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageEmpty")},filtered:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageFiltered")}},actions:[{label:e("actions.create"),to:"create"}],isLoading:a,rowHref:p=>`/settings/locations/${p.id}`,enableSearch:!0,prefix:y,layout:"fill"})})}),s.jsx(m.Sidebar,{children:s.jsx(A,{})})]})}var A=()=>{const{t:e}=f();return s.jsxs(j,{className:"p-0",children:[s.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:s.jsx(q,{level:"h2",children:e("stockLocations.sidebar.header")})}),s.jsx(h,{to:"/settings/locations/shipping-profiles",labelKey:e("stockLocations.sidebar.shippingProfiles.label"),descriptionKey:e("stockLocations.sidebar.shippingProfiles.description"),icon:s.jsx(v,{})}),s.jsx(h,{to:"/settings/locations/shipping-option-types",labelKey:e("stockLocations.sidebar.shippingOptionTypes.label"),descriptionKey:e("stockLocations.sidebar.shippingOptionTypes.description"),icon:s.jsx(D,{})})]})};export{ee as Component};
