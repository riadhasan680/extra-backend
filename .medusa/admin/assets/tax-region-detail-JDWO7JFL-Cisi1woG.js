import{T as N,u as _,a as w}from"./chunk-PUS5XMLP-Cyq1WVe8.js";import"./chunk-PT47ROAO-CXxz7I8K.js";import"./chunk-EVKJNVKW--iQ9bPvE.js";import{u as E,a as C,T as D}from"./chunk-CQOOXWPZ-5JVr4HpX.js";import{T as O}from"./chunk-S22SJRPO-FyGlnTg6.js";import{a as T}from"./chunk-EHAU7SOS-BdFruKSz.js";import{ag as z,r as R,e as k,gh as B,a as A,j as e,el as I,b as d,a3 as h,B as f,C as m,ak as L,an as q,gc as F,H as g,k as S}from"./index-D2YvuHvs.js";import{gi as He,gj as Je}from"./index-D2YvuHvs.js";import{f as G}from"./chunk-IR5DHEKS-aVJcUHa1.js";import"./chunk-KEQOAJC2-TZjI5Om7.js";import"./chunk-DTZXEQXZ-MEuRuO6i.js";import{b as H}from"./chunk-MFALVTRQ-PD-utwU3.js";import"./chunk-ZQJPHZKI-1TyI-cVD.js";import{S as J}from"./chunk-GIZFNLKK-CslZsp8I.js";import"./chunk-6HTZNHPT-DWUk5soK.js";import"./chunk-WVA4O7QS-B2aCntuO.js";import"./chunk-D6UW7URG-D6D77Ltf.js";import{a as Q}from"./chunk-HI6URQ7H-B__2Y56V.js";import{A as X}from"./alert-BU7ep9fJ.js";import"./chunk-4FM6S5CX-BpW1LsFY.js";import"./chunk-HQKGZADC-CEeFqMcu.js";import"./chunk-EMIHDNB7-BuZ3FCsW.js";import"./chunk-HBXV7ENS-Dt027sG7.js";import"./arrow-down-right-mini-BpOTwrfn.js";import"./chunk-PRLQLEEQ-BXMo1m8h.js";import"./chunk-QOCJPBRB-D552hJdx.js";import"./chunk-W7625H47-8OJB8S2n.js";import"./chunk-C76H5USB-Dz6rxCdl.js";import"./chunk-MSDRGCRR-blRNes1y.js";import"./chunk-P3UUX2T6-C0H2Kh9I.js";import"./chunk-VT2JJ5C2-C7ndzPNC.js";import"./chunk-DFFLVEZ5-h4BEg_I0.js";import"./chunk-UC26CCHZ-DbXuoyCH.js";import"./chunk-BW322BVH-D2FbCHy5.js";import"./chunk-XLDQPLK4-BebT61Ko.js";import"./chunk-ADOCJB6L-DewpUc2O.js";import"./chunk-IQBAUTU5-DXse4EWq.js";import"./chunk-3C6WQ7NH-C6waPgso.js";import"./chunk-R65S6ZZV-Cv-ovqWE.js";import"./chunk-KIIT4BNH-DzPEFzBZ.js";import"./react-country-flag.esm-D4x2ro0L.js";import"./index-hbvpKwgw.js";import"./Trans-CpX4fwIJ.js";var Z=({taxRegion:r})=>{const{t:s}=d(),i=r.tax_rates.filter(a=>a.is_default===!0),t=i.length===0;return e.jsxs(m,{className:"divide-y p-0",children:[e.jsx(O,{taxRegion:r,type:"header",asLink:!1,badge:t&&e.jsx(L,{content:s("taxRegions.fields.noDefaultRate.tooltip"),children:e.jsx(q,{color:"orange",size:"2xsmall",className:"cursor-default",children:s("taxRegions.fields.noDefaultRate.label")})})}),i.map(a=>e.jsx(N,{taxRate:a},a.id))]})},v=10,j="p",W=({taxRegion:r,showSublevelRegions:s})=>{const{t:i}=d(),{searchParams:t,raw:a}=E({pageSize:v,prefix:j}),{tax_regions:o,count:n,isPending:c,isError:l,error:x}=F({...t,parent_id:r.id},{placeholderData:S}),{table:y}=C({count:n,data:o,pageSize:v,prefix:j}),p=T(r.country_code);if(!p&&!s&&!r.children.length)return null;const P=(p==null?void 0:p.type)||"sublevel";if(l)throw x;return e.jsx(m,{className:"divide-y p-0",children:e.jsx(D,{variant:"province",action:{to:"provinces/create",label:i("actions.create")},table:y,isPending:c,queryObject:a,count:n,children:e.jsx(g,{level:"h2",children:i(`taxRegions.${P}.header`)})})})},b=10,u="o",$=({taxRegion:r})=>{const{t:s}=d(),{searchParams:i,raw:t}=H({pageSize:b,prefix:u}),{tax_rates:a,count:o,isPending:n,isError:c,error:l}=Q({...i,tax_region_id:r.id,is_default:!1},{placeholderData:S}),{table:x}=_({count:o,data:a,pageSize:b,prefix:u});if(c)throw l;return e.jsx(m,{className:"p-0",children:e.jsx(w,{isPending:n,table:x,count:o,action:{label:s("actions.create"),to:"overrides/create"},queryObject:t,prefix:u,children:e.jsx(g,{level:"h2",children:s("taxRegions.taxOverrides.header")})})})},K=({taxRegion:r,showSublevelRegions:s,setShowSublevelRegions:i})=>{const{t}=d(),[a,o]=R.useState(!1);return T(r.country_code)||s||a||r.children.length?null:e.jsx(X,{dismissible:!0,variant:"info",className:"bg-ui-bg-base",children:e.jsxs("div",{className:"flex flex-col gap-y-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(h,{size:"small",leading:"compact",weight:"plus",asChild:!0,children:e.jsx("h2",{children:t("taxRegions.fields.sublevels.alert.header")})}),e.jsx(h,{size:"small",leading:"compact",className:"text-pretty",children:t("taxRegions.fields.sublevels.alert.description")})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(f,{variant:"secondary",size:"small",onClick:()=>i(!0),children:t("taxRegions.fields.sublevels.alert.action")}),e.jsx(f,{variant:"transparent",size:"small",onClick:()=>o(!0),children:t("actions.hide")})]})]})})};function M({taxRegion:r}){const{t:s}=d();return e.jsxs(m,{className:"divide-y p-0",children:[e.jsx(g,{level:"h2",className:"px-6 py-4",children:s("taxRegions.provider.header")}),e.jsx("div",{className:"px-6 py-4",children:r.provider_id&&e.jsx("span",{className:"text-ui-fg-subtle",children:G(r.provider_id)})})]})}var qe=()=>{const{id:r}=z(),[s,i]=R.useState(!1),t=k(),{tax_region:a,isLoading:o,isError:n,error:c}=B(r,void 0,{initialData:t}),{getWidgets:l}=A();if(o||!a)return e.jsx(I,{sections:4,showJSON:!0});if(n)throw c;return e.jsxs(J,{data:a,showJSON:!0,widgets:{after:l("tax.details.after"),before:l("tax.details.before")},children:[e.jsx(K,{taxRegion:a,showSublevelRegions:s,setShowSublevelRegions:i}),e.jsx(Z,{taxRegion:a}),e.jsx(W,{taxRegion:a,showSublevelRegions:s}),e.jsx($,{taxRegion:a}),e.jsx(M,{taxRegion:a})]})};export{He as Breadcrumb,qe as Component,qe as TaxRegionDetail,Je as loader};
